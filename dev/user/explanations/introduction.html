

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Essential Concepts &#8212; epics_containers 0.9.dev73+gb60c8a7 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user/explanations/introduction';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://epics-containers.github.io/epics_containers/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'dev';
        </script>
    <link rel="shortcut icon" href="../../_static/k8s-epics2.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="epics-containers Contents" href="whats_in.html" />
    <link rel="prev" title="Kubernetes Additional How Toâ€™s" href="../how-to/useful_k8s.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/k8s-epics2.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/k8s-epics2.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
    <p class="title logo__title">epics_containers</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../developer/index.html">
                        Developer Guide
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://github.com/epics-containers/epics_containers/releases">
                    Release Notes
                  </a>
                </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/epics-containers/epics_containers" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/epics_containers" title="PyPI" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-cube"></i></span>
            <label class="sr-only">PyPI</label></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-bs-toggle="dropdown">
      dev  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div class="version-switcher__menu dropdown-menu list-group-flush py-0">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        User Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../developer/index.html">
                        Developer Guide
                      </a>
                    </li>
                

                <li class="nav-item">
                  <a class="nav-link nav-external" href="https://github.com/epics-containers/epics_containers/releases">
                    Release Notes
                  </a>
                </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/epics-containers/epics_containers" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/epics_containers" title="PyPI" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-cube"></i></span>
            <label class="sr-only">PyPI</label></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-bs-toggle="dropdown">
      dev  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div class="version-switcher__menu dropdown-menu list-group-flush py-0">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../tutorials/00_intro.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/01_setup_workstation.html">Setup a Developer Workstation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/02_devcontainer.html">Setup the Devcontainer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/03_setup_k8s.html">Setup a Kubernetes Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/04_create_beamline.html">Create a beamline repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/05_deploy_example.html">Deploy The Example IOC</a></li>

<li class="toctree-l1"><a class="reference internal" href="../tutorials/06_generic_ioc.html">Working with Generic IOCs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/07_support_module.html">Working with Support Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/08_new_support.html">Creating a New Support Module</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">How-to Guides</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../how-to/add_ioc.html">Add an IOC instance to a beamline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/create_ioc.html">Create a new generic IOC image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/run_iocs.html">Run an IOC without Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/debug.html">Debug an IOC instance locally</a></li>

<li class="toctree-l1"><a class="reference internal" href="../how-to/contributing.html">Contributing to the project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/own_tools.html">Choose Your Developer Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/useful_k8s.html">Kubernetes Additional How Toâ€™s</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Explanations</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Essential Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="whats_in.html">epics-containers Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="net_protocols.html">Channel Access and Other Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="kubernetes_cluster.html">Kubernetes Cluster Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs-structure.html">About the documentation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../reference/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/cli.html">Command Line Interface for IOC Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Index</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Essential Concepts</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="essential-concepts">
<span id="essential"></span><h1>Essential Concepts<a class="headerlink" href="#essential-concepts" title="Permalink to this heading">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">#</a></h2>
<p>Kubernetes for EPICS IOCs applies modern industry standards to the management
of IOCs.</p>
<p>There are 5 themes to this strategy:</p>
<dl class="field-list simple">
<dt class="field-odd">Containers<span class="colon">:</span></dt>
<dd class="field-odd"><p>Package IOC software and execute it in a lightweight virtual environment.</p>
</dd>
<dt class="field-even">Kubernetes<span class="colon">:</span></dt>
<dd class="field-even"><p>Centrally orchestrate all IOCs at a facility.</p>
</dd>
<dt class="field-odd">Helm Charts<span class="colon">:</span></dt>
<dd class="field-odd"><p>Deploy IOCs into Kubernetes with version management.</p>
</dd>
<dt class="field-even">Repositories<span class="colon">:</span></dt>
<dd class="field-even"><p>Source, container and helm repositories manage all of the above assets.
No shared file systems required.</p>
</dd>
<dt class="field-odd">Continuous Integration / Delivery<span class="colon">:</span></dt>
<dd class="field-odd"><p>Source repositories automatically build container and helm charts
delivering them to OCI registries.</p>
</dd>
</dl>
<p>See below for more detail on each of these.</p>
</section>
<section id="concepts">
<h2>Concepts<a class="headerlink" href="#concepts" title="Permalink to this heading">#</a></h2>
<section id="images-and-containers">
<h3>Images and Containers<a class="headerlink" href="#images-and-containers" title="Permalink to this heading">#</a></h3>
<p>Containers provide the means to package up IOC software and execute it
in a lightweight virtual environment. This includes saving the packages
into public or private image registries such as DockerHub or Google Cloud
Registry.</p>
<p>The Open Container Initiative (OCI) defines the set of container services
and their APIs such that container images can be interchanged between
different frameworks.</p>
<p>Thus, in this project we develop, build and test our container images
using docker or podman but the images can be run under Kubernetesâ€™ own
container runtime.</p>
<p>This article does a good job of explaining the relationship between docker /
containers and Kubernetes <a class="reference external" href="https://semaphoreci.com/blog/kubernetes-vs-docker">https://semaphoreci.com/blog/kubernetes-vs-docker</a></p>
<p>An important outcome of using containers is that you can alter the
environment inside the container to suit the IOC code, instead of altering the
code to suit your infrastructure. At DLS, this means that we are able to use
vanilla EPICS base and support modules. We no longer require our own
forks of these repositories.</p>
<section id="generic-iocs-and-instances">
<h4>Generic IOCs and instances<a class="headerlink" href="#generic-iocs-and-instances" title="Permalink to this heading">#</a></h4>
<p>An important principal of the approach presented here is that an IOC container
image represents a â€˜genericâ€™ IOC. The generic IOC image is used for all
IOC instances that connect to a given class of device.</p>
<p>An IOC instance runs in a container that bases its
filesystem on a generic IOC image.
In addition the instance has configuration mapped into the
container that will bootstrap the unique properties of that instance.
In most cases the configuration need only be a single IOC boot script.</p>
<p>This approach reduces the number of images required and saves disk. It also
makes for simple configuration management.</p>
<p>Throughout this documentation we will use the terms Generic IOC and
IOC Instance. The word IOC without this context is ambiguous.</p>
</section>
</section>
<section id="kubernetes">
<h3>Kubernetes<a class="headerlink" href="#kubernetes" title="Permalink to this heading">#</a></h3>
<p><a class="reference external" href="https://kubernetes.io/">https://kubernetes.io/</a></p>
<p>Kubernetes easily and efficiently manages containers across clusters of hosts.â€‹</p>
<p>It builds upon 15 years of experience of running production workloads at
Google, combined with best-of-breed ideas and practices from the communityâ€‹,
since it was open-sourced in 2014.</p>
<p>Today it is by far the dominant orchestration technology for containers.</p>
<p>In this project we use Kubernetes to provide a standard way of implementing
these features:</p>
<ul class="simple">
<li><p>Auto start IOCs when servers come upâ€‹</p></li>
<li><p>Manually Start and Stop IOCsâ€‹</p></li>
<li><p>Monitor IOC status and versionsâ€‹</p></li>
<li><p>Deploy versioned IOCs to the beamlineâ€‹</p></li>
<li><p>Rollback to a previous IOC versionâ€‹</p></li>
<li><p>Allocate the server which runs an IOCâ€‹</p></li>
<li><p>View the current log â€‹</p></li>
<li><p>View historical logs (via graylog)â€‹</p></li>
<li><p>Connect to an IOC and interact with its shell</p></li>
<li><p>debug an ioc by starting a bash shell inside itâ€™s container</p></li>
<li><p>etc.</p></li>
</ul>
</section>
<section id="helm">
<h3>Helm<a class="headerlink" href="#helm" title="Permalink to this heading">#</a></h3>
<p><a class="reference external" href="https://helm.sh/">https://helm.sh/</a></p>
<p>Helm is the most popular package manager for Kubernetes applicationsâ€‹.</p>
<p>The packages are called Helm Chartsâ€‹. They contain templated YAML files to
define a set of resources to apply to a Kubernetes clusterâ€‹.</p>
<p>Helm has functions to deploy Charts to a cluster and manage multiple versions
of the chart within the clusterâ€‹.</p>
<p>It also supports registries for storing version history of charts,
much like docker.</p>
<p>In this project we use Helm Charts to define and deploy IOC instances. Each
beamline has its own Helm Repository which stores current and historical
version of its IOC instances.</p>
</section>
<section id="repositories">
<h3>Repositories<a class="headerlink" href="#repositories" title="Permalink to this heading">#</a></h3>
<p>All of the assets required to manage a
set of IOCs for a beamline are held in repositories.</p>
<p>Thus all version control is done
via these repositories and no special locations in
a shared filesystem are required
(The legacy approach at DLS relied heavily on
know locations in a shared filesystem).</p>
<p>In the epics-containers examples all repositories are held in the same
github organization. This is nicely contained and means that only one set
of credentials is required to access all the resources.</p>
<p>There are many alternative services for storing these repositories, both
in the cloud and on premises. Below we list the choices we have tested
during the POC.</p>
<p>The 3 classes of repository are as follows:</p>
<dl class="field-list simple">
<dt class="field-odd">Source Repository<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>Holds the source code but also provides the
Continuous Integration actions for testing, building and publishing to
the image / helm repositories. These have been tested:</p>
<ul>
<li><p>github</p></li>
<li><p>gitlab (on prem)</p></li>
</ul>
</li>
</ul>
</dd>
<dt class="field-even">An image repository<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>Holds the generic IOC container images and their
dependencies. The following have been tested:</p>
<ul>
<li><p>github packages</p></li>
<li><p>dockerhub</p></li>
<li><p>Google Cloud Container Registry</p></li>
</ul>
</li>
</ul>
</dd>
<dt class="field-odd">A helm chart repository<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>This is where the definitions of IOC instances
are stored. They are in the form of a helm chart which describes to
Kubernetes the resources needed to spin up the IOC.
These have been tested:</p>
<ul>
<li><p>github packages</p></li>
<li><p>Google Cloud Artifact Registry</p></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
<section id="continuous-integration">
<h3>Continuous Integration<a class="headerlink" href="#continuous-integration" title="Permalink to this heading">#</a></h3>
<p>Our examples all use continuous integration to get from pushed source
to the published images / helm charts.</p>
<p>This allows us to maintain a clean code base that is continually tested for
integrity and also to maintain a direct relationship between source code tags
and the tags of their built resources.</p>
<p>There are these types of CI:</p>
<dl class="field-list simple">
<dt class="field-odd">Generic IOC source<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>builds a generic IOC container image</p></li>
<li><p>runs some tests against that image</p></li>
<li><p>publishes the image to github packages (only if the commit is tagged)</p></li>
</ul>
</dd>
<dt class="field-even">beamline definition source<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>builds a helm chart from each ioc definition
(TODO ibek will do this - at present the charts are hand coded)</p></li>
<li><p>TODO: IOCs which are unchanged should not be published again</p></li>
<li><p>publishes the charts to github packages (only if the commit is tagged)</p></li>
</ul>
</dd>
<dt class="field-odd">helm library source<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>builds the helm chart</p></li>
<li><p>publishes it to github packages (only if the commit is tagged)</p></li>
</ul>
</dd>
<dt class="field-even">documentation source<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>builds the sphinx docs</p></li>
<li><p>publishes it to github.io pages</p></li>
</ul>
</dd>
</dl>
</section>
</section>
<section id="scope">
<h2>Scope<a class="headerlink" href="#scope" title="Permalink to this heading">#</a></h2>
<p>This project initially targets x86_64 Linux Soft IOCs and RTEMS IOCs.</p>
<p>Other linux architectures could be added to the Kubernetes cluster.</p>
<p>In future it is entirely possible that Windows IOCs could also be supported
since Kubernetes supports mixed OS clusters. This would be needed
because windows containers require a windows host.</p>
<p>Note that OPI is also out of scope for this initial phase. See
<a class="reference internal" href="../reference/faq.html#no-opi"><span class="std std-ref">Why no mention of Operator Interfaces?</span></a></p>
</section>
<section id="additional-tools">
<h2>Additional Tools<a class="headerlink" href="#additional-tools" title="Permalink to this heading">#</a></h2>
<section id="epics-containers-cli">
<h3>epics-containers-cli<a class="headerlink" href="#epics-containers-cli" title="Permalink to this heading">#</a></h3>
<p>The project epics-containers-cli implements simple
line functions for deploying and monitoring IOCs. It is just a wrapper
around the tools kubectl, podman and helm, but saves typing and provides
help and command line completion.</p>
<p>See <a class="reference internal" href="../reference/cli.html#cli"><span class="std std-ref">Command Line Interface for IOC Management</span></a> for details.</p>
<p>It also provides a Dockerfile for building a personal developer image
allowing a developer to work on support modules or IOCs anywhere.</p>
</section>
<section id="ibek">
<h3>Ibek<a class="headerlink" href="#ibek" title="Permalink to this heading">#</a></h3>
<p>IOC Builder for EPICS and Kubernetes provides a way to generate an IOC
helm chart from a YAML description of the IOC.</p>
<p>See <a class="github reference external" href="https://github.com/epics-containers/ibek">epics-containers/ibek</a>.</p>
</section>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../how-to/useful_k8s.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Kubernetes Additional How Toâ€™s</p>
      </div>
    </a>
    <a class="right-next"
       href="whats_in.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">epics-containers Contents</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#concepts">Concepts</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#images-and-containers">Images and Containers</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#generic-iocs-and-instances">Generic IOCs and instances</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#kubernetes">Kubernetes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#helm">Helm</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#repositories">Repositories</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#continuous-integration">Continuous Integration</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scope">Scope</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-tools">Additional Tools</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#epics-containers-cli">epics-containers-cli</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ibek">Ibek</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  
  <div class="tocsection editthispage">
    <a href="https://github.com/epics-containers/epics_containers/edit/dev/docs/user/explanations/introduction.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../../_sources/user/explanations/introduction.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner"></div>
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>