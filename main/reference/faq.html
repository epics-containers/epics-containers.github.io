


<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Frequently Asked Questions &mdash; epics_containers 0.4+5.g25d2f9a documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/k8s-epics2.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Command Line Interface for IOC Management" href="cli.html" />
    <link rel="prev" title="Debug an IOC instance locally" href="../how-to/debug.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: rgb(7, 43, 93)" >
          

          
            <a href="../index.html" class="icon icon-home"> epics_containers
          

          
            
            <img src="../_static/k8s-epics2.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                main
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  <style>
    /* style mobile top nav to look like main nav */
    .wy-nav-top {
        background: rgb(7, 43, 93)
    }
  </style>
  
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/setup_k8s.html">Setup a Kubernetes Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/useful_k8s.html">Useful Kubernetes Additions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/create_beamline.html">Create a beamline repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/add_ioc.html">Add an IOC instance to a beamline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/manage_iocs.html">Deploy and Manage IOCs</a></li>
</ul>
<p class="caption"><span class="caption-text">Explanations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../explanations/introduction.html">Essential Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/whats_in.html">epics-containers Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/net_protocols.html">Channel Access and Other Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/kubernetes_cluster.html">Kubernetes Cluster Config</a></li>
</ul>
<p class="caption"><span class="caption-text">How-to Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../how-to/create_ioc.html">Create a new generic IOC image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/generic_iocs.html">Run an IOC without Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/debug.html">Debug an IOC instance locally</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/debug.html#debug-an-ioc-instance-in-kubernetes">Debug an IOC instance in Kubernetes</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#why-no-mention-of-operator-interfaces">Why no mention of Operator Interfaces?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#why-have-ioc-xxx-repositories">Why have ioc-XXX repositories?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-can-i-do-ioc-rollback-if-the-internet-is-down">How can I do IOC rollback if the internet is down?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface for IOC Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>

            
          
  <!-- Include all versions of the docs -->
  <!-- https://holzhaus.github.io/sphinx-multiversion/master/templates.html -->
  
  <p class="caption"><span class="caption-text">Versions</span></p>
  <ul>
    <li><a href="faq.html">main</a></li>
  </ul>
  

        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">epics_containers</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Frequently Asked Questions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/reference/faq.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="frequently-asked-questions">
<h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="why-no-mention-of-operator-interfaces">
<span id="no-opi"></span><h2>Why no mention of Operator Interfaces?<a class="headerlink" href="#why-no-mention-of-operator-interfaces" title="Permalink to this headline">¶</a></h2>
<p>OPI was out of scope for the proof of concept. That is because we
expect there to be a web based EPICS OPI available by the time we go
live with K8s IOCs. Kubernetes is very well suited to running web
servers so this is a natural fit.</p>
<p>There are a number of ways to support the current OPI solutions without
breaking the repositories-only model. TODO: add a brief description of these.</p>
</div>
<div class="section" id="why-have-ioc-xxx-repositories">
<h2>Why have ioc-XXX repositories?<a class="headerlink" href="#why-have-ioc-xxx-repositories" title="Permalink to this headline">¶</a></h2>
<p>Why not put the Dockerfile and image generating in the support module itself
instead of creating a separate generic ioc module for each image we
generate?</p>
<p>Answers:</p>
<ul class="simple">
<li><p>There is not always a 1-1 relationship between support modules and generic
IOCs. A generic IOC image is free to add any number of support modules it
requires.</p></li>
<li><p>The lifecycle of a support module will often differ from a generic IOC.
The version number of the image is tied to the ioc-XXX source repo that
generates, so we can have separate versions for support and IOC.</p></li>
<li><p>Not all users of a support module will need images generated and it is
counter productive for them to be required to fix the Dockerfile when
they are working on changes to a support module.</p></li>
</ul>
</div>
<div class="section" id="how-can-i-do-ioc-rollback-if-the-internet-is-down">
<h2>How can I do IOC rollback if the internet is down?<a class="headerlink" href="#how-can-i-do-ioc-rollback-if-the-internet-is-down" title="Permalink to this headline">¶</a></h2>
<p>The examples all use cloud registries for storing the generic IOC images and
IOC instance Helm Charts. However it is still possible to roll back an IOC
version when the internet is not available.</p>
<p>That is because Helm keeps track of several versions of each chart it
deploys, they are stored in the cluster itself (as ReplicaSets). By
default the last 10 are saved.</p>
<p>It is also necessary Kubernetes to be able to pull the generic IOC image. If
the beamline has only one Kubernetes worker node then the previous image will
be in the node’s local cache. If you have more than one then you will need
a global image cache which is useful anyway for reducing traffic to the
registries (JetStack have performed a POC for DLS that demonstrates such a
global cache)</p>
<p>Note that making changes to an IOC and spinning them up would not be possible
if all registries were in the cloud. However it is recommended that the ‘work’
registries are on prem. The production helm registry is also likely to be on
prem since there is little benefit in sharing a facility’s IOC instances.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="cli.html" class="btn btn-neutral float-right" title="Command Line Interface for IOC Management" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../how-to/debug.html" class="btn btn-neutral float-left" title="Debug an IOC instance locally" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Diamond Light Source.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>