


<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Create a beamline repository &mdash; epics_containers 0.4+12.gf7a03f7 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/k8s-epics2.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Deploy The Example IOC" href="deploy_example.html" />
    <link rel="prev" title="Useful Kubernetes Additions" href="useful_k8s.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: rgb(7, 43, 93)" >
          

          
            <a href="../index.html" class="icon icon-home"> epics_containers
          

          
            
            <img src="../_static/k8s-epics2.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                main
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  <style>
    /* style mobile top nav to look like main nav */
    .wy-nav-top {
        background: rgb(7, 43, 93)
    }
  </style>
  
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="setup_k8s.html">Setup a Kubernetes Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="useful_k8s.html">Useful Kubernetes Additions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Create a beamline repository</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#to-start">To Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-repository">Create a repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="#clone-and-tag-the-repository">Clone and Tag the Repository</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deploy_example.html">Deploy The Example IOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="manage_iocs.html">Manage IOCs</a></li>
</ul>
<p class="caption"><span class="caption-text">Explanations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../explanations/introduction.html">Essential Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/whats_in.html">epics-containers Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/net_protocols.html">Channel Access and Other Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/kubernetes_cluster.html">Kubernetes Cluster Config</a></li>
</ul>
<p class="caption"><span class="caption-text">How-to Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../how-to/add_ioc.html">Add an IOC instance to a beamline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/create_ioc.html">Create a new generic IOC image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/run_iocs.html">Run an IOC without Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/debug.html">Debug an IOC instance locally</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/debug.html#debug-an-ioc-instance-in-kubernetes">Debug an IOC instance in Kubernetes</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/cli.html">Command Line Interface for IOC Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/contributing.html">Contributing</a></li>
</ul>

            
          
  <!-- Include all versions of the docs -->
  <!-- https://holzhaus.github.io/sphinx-multiversion/master/templates.html -->
  
  <p class="caption"><span class="caption-text">Versions</span></p>
  <ul>
    <li><a href="create_beamline.html">main</a></li>
  </ul>
  

        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">epics_containers</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Create a beamline repository</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/tutorials/create_beamline.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="create-a-beamline-repository">
<span id="create-beamline"></span><h1>Create a beamline repository<a class="headerlink" href="#create-a-beamline-repository" title="Permalink to this headline">¶</a></h1>
<p>In this tutorial we will create a new beamline source repository on github.</p>
<p>This is where the definitions of IOCs for a beamline will be held. Continuous
integration will generate helm charts for each IOC and push them to
your account’s package repository.</p>
<p>The beamline will come with an example IOC and further steps in the
tutorial will teach you how to add your own.</p>
<div class="section" id="to-start">
<h2>To Start<a class="headerlink" href="#to-start" title="Permalink to this headline">¶</a></h2>
<p>For this exercise you will require a github user account or organization in
which to place the new repo. If you do not have one then follow GitHub’s
<a class="reference external" href="https://docs.github.com/en/get-started/signing-up-for-github/signing-up-for-a-new-github-account">instructions</a>.</p>
<p>Log in to your account by going here <a class="reference external" href="https://github.com/login">https://github.com/login</a>.</p>
</div>
<div class="section" id="create-a-repository">
<h2>Create a repository<a class="headerlink" href="#create-a-repository" title="Permalink to this headline">¶</a></h2>
<p>Navigate to the beamline template repo here <a class="reference external" href="https://github.com/epics-containers/blxx-template">https://github.com/epics-containers/blxx-template</a></p>
<p>Click on ‘Use This Template’. Choose a name and description for your repo.
Click ‘Create Repository From Template’.</p>
<img alt="../_images/create_repo.png" class="align-center" src="../_images/create_repo.png" />
<p>This will create your new repository and take you to its Code panel.</p>
<p>Now Click on ‘Code’ and copy the SSH or HTTPS link presented. This depends on
how you will authenticate to github. HTTPS will ask you for your user name
and password for all transactions. To setup SSH authentication see <a class="reference external" href="https://docs.github.com/en/enterprise-server&#64;3.0/github/authenticating-to-github/connecting-to-github-with-ssh/about-ssh">about ssh</a></p>
</div>
<div class="section" id="clone-and-tag-the-repository">
<h2>Clone and Tag the Repository<a class="headerlink" href="#clone-and-tag-the-repository" title="Permalink to this headline">¶</a></h2>
<p>NOTE: For the remainder of the tutorial you will use the project you
created in <a class="reference internal" href="deploy_example.html"><span class="doc">Deploy The Example IOC</span></a>. You need to substitute in your account
details to the commands listed here.</p>
<p>In a terminal use git to clone the repository by pasting in the URL you copied
in the previous step:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="o">&lt;</span><span class="n">your</span> <span class="n">account</span> <span class="ow">or</span> <span class="n">organization</span><span class="o">&gt;/</span><span class="n">bl00i</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Now test that CI is working by tagging the repo and pushing it back to github.</p>
<p>cd to the root of the project you created in <a class="reference internal" href="deploy_example.html"><span class="doc">Deploy The Example IOC</span></a>, then:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">tag</span> <span class="mf">0.1</span>
<span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="mf">0.1</span>
</pre></div>
</div>
<p>This will cause github CI to generate a helm chart for the example IOC and
deliver it to the account packages repository.</p>
<p>To watch the progress go to the Actions Panel for your project.</p>
<img alt="../_images/github_actions.png" class="align-center" src="../_images/github_actions.png" />
<p>Once the CI completes you should have a helm chart delivered in your packages.
Go to the code pane and click on the example Package circled below to see it.</p>
<img alt="../_images/github_package.png" class="align-center" src="../_images/github_package.png" />
<p>There will be one version of the package, with two tags:</p>
<ul class="simple">
<li><p>the tag you set on the source</p></li>
<li><p>and the ‘latest’ tag</p></li>
</ul>
<img alt="../_images/github_example_package.png" class="align-center" src="../_images/github_example_package.png" />
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="deploy_example.html" class="btn btn-neutral float-right" title="Deploy The Example IOC" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="useful_k8s.html" class="btn btn-neutral float-left" title="Useful Kubernetes Additions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Diamond Light Source.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>